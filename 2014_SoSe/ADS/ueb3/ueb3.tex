\documentclass[11pt,a4paper,ngerman]{article}
\usepackage[bottom=2.5cm,top=2.5cm]{geometry}
\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{ae}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{fancyref}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{stmaryrd}
\usepackage{paralist}
\usepackage{tikz}
\usepackage{amsthm}

\usetikzlibrary{arrows,automata}

\newtheorem{propo}{Satz}
\newtheorem{lemmas}[propo]{Lemma}

\usepackage[pdftex, bookmarks=false, pdfstartview={FitH}, linkbordercolor=white]{hyperref}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[C]{ADS}
\fancyhead[L]{Übung 3}
\fancyhead[R]{SoSe 2014}
\fancyfoot{}
\fancyfoot[L]{}
\fancyfoot[C]{\thepage \hspace{1px} von \pageref{LastPage}}
\renewcommand{\footrulewidth}{0.5pt}
\renewcommand{\headrulewidth}{0.5pt}
\newcommand{\set}[1]{ \{ #1 \}}
\setlength{\parindent}{0pt}
\setlength{\headheight}{0pt}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\bigO}{\mathcal{O}}
\newcommand{\Rarr}{\Rightarrow}
\newcommand{\rarr}{\rightarrow}
\newcommand{\Pot}{\mathcal{P}}
\newcommand{\abs}[1]{\left |#1\right|}
\newcommand{\solved}{$\mbox{}$ \hfill $\square$}
\newcommand{\Epsilon}{\mathcal{E}}

\newcommand{\erw}[1]{\text{\bfseries E} \left[ #1 \right]}
\newcommand{\prob}[1]{\text{Pr}\left[ #1 \right]}

\date{}
\title{Übung 3}
\author{Max Wisniewski, Melanie Skodzik}


%%
%% Enviroments for proofs and lemmas
%%
\newtheorem{prop}{\bfseries Behauptung}
\newtheorem{lemma}{\bfseries Lemma}

\begin{document}

\lstset{language=Pascal, basicstyle=\ttfamily\fontsize{10pt}{10pt}\selectfont\upshape, commentstyle=\rmfamily\slshape, keywordstyle=\rmfamily\bfseries, breaklines=true, frame=single, xleftmargin=3mm, xrightmargin=3mm, tabsize=2, mathescape=true}

\renewcommand{\figurename}{Grafik}

\maketitle
\thispagestyle{fancy}


\subsection*{Aufgabe 1}

\subsubsection*{(a)}
Seien $T_1$ und $T_2$ zwei binäre Suchbäume mit Schlüsselmenge $\{1, \ldots, n\}$. Zeigen Sie, dass sich $T_1$ mit $O(n)$ Rotationen in $T_2$ konvertieren lässt. Bestimmen Sie die Anzahl der Rotationen für Ihre Strategie im schlimmsten Fall exakt.

Versuchen Sie, so effizient wie möglich zu sein.\\

\noindent\textbf{Beweis:}\\

Um den Baum $T_1$ in den Baum $T_2$ zu transformieren, können wir dies entweder direkt angeben oder beide über einen Referenzbaum führen. Dazu sehen wir zunächst, dass eine Links-/Rechtsrotationen hintereinander auf den selben Knoten (nicht Wert sondern Position im Baum) den Baum nicht verändern. Damit ist jede Rotation umkehrbar.

Dies können wir benutzen. Wenn $T'$ ein Referenzbaum ist und $R_1 = a_1 ... a_k$ eine Folge von Rotation um $T_1$ in $T'$ zu transformieren und
$R_2 = b_1 ... b_l$ ist um $T_2$ in $T'$ zu transformieren dann ist $R = a_1 .. a_k b_l^{-1} .. b_1^{-1}$ eine Folge von Rotationen um $T_1$ in $T_2$ zu transformieren,
wobei $b_i^{-1}$ genau die Inverse Rotation ist.

Nun brauchen wir noch einen Referenzbaum.\\

Wir haben hierzu den listenförmigen Baum gewählt, der nur linke Kinder hat. Sei $T$ ein Baum, bei dem noch ein rechtes Kind existiert und $x$ ein Knoten, der nur linkes Kind ist, mit einem rechten Kind (dies existiert, solange ein rechts Kind existiert, solange wir die Wurzel als linkes Kind betrachten). Machen wir nun eine Linksrotation um $x$,
so wird $x$ auf dem Linken Pfad bleiben so wie alle linken Kinder darunter. Dagegen wird das Rechte Kind zum Vater von $x$ (dessen Linkes Kind es ist). Da $x$ vorher linkes Kind war ist der neue Vater nun auch linkes Kind.\\

Was wir schon festgestellt haben, ist das pro Rotation ein weiteres Kind links wird. Damit ist die maximale Anzahl von Rotationen $n-1$, da mindestens die Wurzel zu Beginn auf dem linken Pfad liegt. Würden wir die Taktik von beiden Bäumen $T_1$ und $T_2$ aus so benutzen, hätten wir eine Laufzeit von $2n-2$ was in $O(n)$ liegt, aber es schaut noch nicht so optimal aus.\\

\textbf{tbd}

\subsubsection*{(b)}

Sei $n=5$. Betrachte Sie die Anfragefolge $\sigma = 2,1,5,1,2,4,4,2,3,5$. Bestimmen Sie $I(\sigma)$. Geben Sie eine möglichst gute Bearbeitungsstrategie für $\sigma$ an. Berechnen Sie die Kosten für Ihren Algorithmus und vergleichen Sie sie mit $I(\sigma)$.\\

\noindent\textbf{Lösung:}\\

Im vollständigen Baum befinden sich $4,2,1$ auf dem linken Pfad. Es wird also das erste mal bei Anfrage $3$ auf die 5 ein rechter Pfad Liebling, der danach sofort wieder auf links gesetzt wird. Nun bleiben wir bis zu den letzten beiden Anfragen auf links. Bei den letzten beiden gehen wir genau 2 mal nach Rechts, wobei wir vorher auf links waren.\\

Demnach ist $I(\sigma) = 3$.\\

Bei der optimalen Strategie für $\sigma$ sind wir uns unsicher, mit welchem Baum wir starten, deswegen geben wir uns schon einen möglichst guten Baum vor.

\begin{center}
   1.
   \begin{tikzpicture}[font=\small, minimum size=0.5cm]
      \node[circle, draw=black,name=a] {$2$};
      \node[circle, draw=black, name=b, below left of=a] {$1$};
      \node[circle, draw=black, name=c, below right of =a] {$5$};
      \node[circle, draw=black, name=d, below left of = c] {$4$};
      \node[circle, draw=black, name=e, below left of =d] {$3$};

      \path[-]
         (a) edge (b)
         (a) edge (c)
         (c) edge (d)
         (d) edge (e);
   \end{tikzpicture}
   2.
    \begin{tikzpicture}[font=\small, minimum size=0.5cm]
      \node[circle, draw=black,name=a] {$2$};
      \node[circle, draw=black, name=b, below left of=a] {$1$};
      \node[circle, draw=black, name=c, below right of =a] {$4$};
      \node[circle, draw=black, name=d, below left of = c] {$3$};
      \node[circle, draw=black, name=e, below right of =c] {$5$};

      \path[-]
         (a) edge (b)
         (a) edge (c)
         (c) edge (d)
         (c) edge (e);
   \end{tikzpicture}
   3.
  \begin{tikzpicture}[font=\small, minimum size=0.5cm]
      \node[circle, draw=black,name=a] {$4$};
      \node[circle, draw=black, name=b, below left of=a] {$2$};
      \node[circle, draw=black, name=c, below left of =b] {$1$};
      \node[circle, draw=black, name=d, below right of = b] {$3$};
      \node[circle, draw=black, name=e, below right of =a] {$5$};

      \path[-]
         (a) edge (b)
         (b) edge (c)
         (b) edge (d)
         (a) edge (e);
   \end{tikzpicture}
   4.
   \begin{tikzpicture}[font=\small, minimum size=0.5cm]
      \node[circle, draw=black,name=a] {$4$};
      \node[circle, draw=black, name=b, below left of=a] {$3$};
      \node[circle, draw=black, name=c, below left of =b] {$2$};
      \node[circle, draw=black, name=d, below left of = c] {$1$};
      \node[circle, draw=black, name=e, below right of = a] {$5$};

      \path[-]
         (a) edge (b)
         (b) edge (c)
         (c) edge (d)
         (a) edge (e);
   \end{tikzpicture}
\end{center}

Wir starten im 1. Baum und lesen dort $2,1,5$ und machen dann eine Rotation in $5$. Die Kosten hierfür sind insgesamt $6$.

Im 2. Baum lesen wir $1,2$ und machen dann in der 2 eine Rotation. Die Kosten sind $4$.

Im dritten Baum lesen wir die $4,4,2$ und machen in der $2$ dann eine Rotation. Die Kosten sind $5$.

Im letzten Baum lesen wir nur noch die $3$ und die $5$ mit den Kosten $4$.\\

Insgesamt kommen wir also auf $19$ an kosten. Um dies zu Vergleichen ziehen wir erstmal die Kosten für die Zugriffe auf
die benötigten Elemente ab (Das Interleaving Bound hat deshalb auch $O(m + I(\sigma)$ als Laufzeit). Bleiben uns also
$9$ als Kosten.\\

So direkt im Vergleich fällt einem nicht so viel auf. Da man für das Interleaving Bound nur Änderungen nach Rechts zählt und nicht links
hätte man das doppelte des Interleaving Bounds erwarten können. Nun sind wir bei den 3fachen Kosten. Wir haben aber zumindest nur 3 mal rotiert,
was uns bei einem Wechsel von $3$ sinnvoll erscheint. Es könnte aber natürlich auch sein, dass die Strategie nicht optimal ist.

\subsection*{Aufgabe 2}

Geben Sie die Details für die Operationen \lstinline|join| und \lstinline|split| aus der Vorlesung.

\begin{description}

\item[\bfseries join:] Gegeben ein binärer Suchbaum $T$, dessen linker und rechter Teilbaum gültige AVL-Bäume sind, transformiere $T$ in einen gültigen AVL-Baum. Die Operationen soll $T$ nur durch Rotationen verändern und $\mathcal{O}(1 + | h_1 - h_2|)$ Schritte benötigen, wobei $h_1$ und $h_2$ die Höhen des linken und des rechten Teilbaums von $T$ sind.\\

\noindent\textbf{Lösung:}\\

tbd

\item[\bfseries split:] Gegeben ein AVL-Baum $T$ und ein Knoten $x \in T$, transformiere $T$ in einen binären Suchebaum mit Wurzel $x$, so dass der linke und der rechte Teilbaum jeweils gültige AVL-Bäume sind. Die Operationen soll $T$ nur durch Rotationen verändern und $O(h)$ Schritte benötigen, wobei $H$ die Höhe von $T$ ist.\\

\noindent\textbf{Lösung:}\\

tbd

\end{description}

\label{LastPage}
\end{document}
